(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-09c07eca"],{"0848":function(e,t,a){},"77b4":function(e,t,a){"use strict";a("0848")},"80fa":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"management"},[a("div",{staticClass:"top"},[a("span",[e._v("人员搜索:")]),a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入",clearable:""},on:{clear:e.clearValue},model:{value:e.valueName,callback:function(t){e.valueName="string"===typeof t?t.trim():t},expression:"valueName"}}),a("i",{staticClass:"ibutt"}),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.queryPresonnel}},[e._v("查询")])],1),a("div",{staticClass:"bottom"},[a("Table",e._b({attrs:{NavList:e.NavList,isShow:!1},on:{changePage:e.changePage,isShowDialog:e.isShowDialog}},"Table",e.currentObj,!1,!0),[a("el-table-column",{attrs:{label:"操作","min-width":"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.isShowDialogModify(t.row)}}},[e._v(" 修改 ")]),a("el-button",{staticStyle:{color:"red"},attrs:{type:"text",size:"small"},on:{click:function(a){return e.delPersonnel(t.row)}}},[e._v(" 删除 ")])]}}])})],1)],1),a("NewDailog",{ref:"newdailog",attrs:{dialogFormVisible:e.dialogFormVisible,RoleClassification:e.RoleClassification,areaList:e.areaList,currentPageRecords:e.currentPageRecords},on:{isOFFDialog:e.offdialog,repeat:e.getUpersonnel}})],1)},n=[],i=a("c7eb"),o=a("1da1"),s=a("bc95"),l=a("8409"),c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.title,visible:e.dialogFormVisible,"before-close":e.handleClose,width:"41%"}},[a("el-form",{ref:"formData",attrs:{model:e.formData,rules:e.formDataRules}},[a("el-form-item",{attrs:{label:"人员名称：","label-width":e.formLabelWidth,prop:"userName"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{autocomplete:"off",placeholder:"请输入",maxlength:"5","show-word-limit":""},model:{value:e.formData.userName,callback:function(t){e.$set(e.formData,"userName",t)},expression:"formData.userName"}})],1),a("el-form-item",{attrs:{label:"角色：","label-width":e.formLabelWidth,prop:"roleId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.formData.roleId,callback:function(t){e.$set(e.formData,"roleId",t)},expression:"formData.roleId"}},e._l(e.RoleClassification,(function(e){return a("el-option",{key:e.roleId,attrs:{label:e.roleName,value:e.roleId}})})),1)],1),a("el-form-item",{attrs:{label:"联系电话：","label-width":e.formLabelWidth,prop:"mobile"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入",maxlength:"11","show-word-limit":""},model:{value:e.formData.mobile,callback:function(t){e.$set(e.formData,"mobile",t)},expression:"formData.mobile"}})],1),a("el-form-item",{attrs:{label:"负责区域：","label-width":e.formLabelWidth,prop:"regionId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.formData.regionId,callback:function(t){e.$set(e.formData,"regionId",t)},expression:"formData.regionId"}},e._l(e.areaList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.remark,value:e.id}})})),1)],1),a("el-form-item",{staticClass:"img-info",attrs:{label:"头像：","label-width":e.formLabelWidth,prop:"image"}},[a("el-upload",{staticClass:"upload-demo",attrs:{action:"","http-request":e.Coverhttprequest,"before-upload":e.beforeUploadImg,"show-file-list":!1}},[a("div",{staticClass:"img-demo"},[e.formData.image?a("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:e.formData.image,alt:""}}):a("span",{staticClass:"svg-container"},[a("svg-icon",{attrs:{"icon-class":"sctp"}})],1)]),a("div",{staticClass:"el-upload__tip upload-color",attrs:{slot:"tip"},slot:"tip"},[e._v(" 支持扩展名：jpg、png，文件不得大于100kb ")])])],1),a("el-form-item",{attrs:{label:"状态","label-width":e.formLabelWidth}},[[a("el-checkbox",{model:{value:e.formData.status,callback:function(t){e.$set(e.formData,"status",t)},expression:"formData.status"}},[e._v("是否启用")])]],2)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"bi",on:{click:function(t){return e.$emit("isOFFDialog")}}},[e._v("取 消")]),a("el-button",{staticClass:"bn",attrs:{type:"primary"},on:{click:e.addPeronnel}},[e._v("确 定")])],1)],1)},u=[],d=(a("d3b7"),a("4de4"),a("b0c0"),{name:"NewDailog",data:function(){var e=this,t=function(t,a,r){if(e.formData.id)r();else{var n=e.currentPageRecords.some((function(e){return e.userName===a}));n?r(new Error("姓名重复")):r()}},a=function(t,a,r){if(e.formData.id)r();else{var n=e.currentPageRecords.some((function(e){return e.mobile===a}));n?r(new Error("手机号重复")):r()}};return{formData:{userName:"",roleId:"",mobile:"",regionId:"",regionName:"",status:!1,image:""},formDataRules:{userName:[{required:!0,message:"请输入",trigger:"blur"},{validator:t,trigger:"blur"}],roleId:[{required:!0,message:"请输入",trigger:"blur"}],mobile:[{required:!0,message:"请输入",trigger:"blur"},{pattern:/^(?:(?:\+|00)86)?1[3-9]\d{9}$/,message:"手机号格式不正确",trigger:"change"},{validator:a,trigger:"blur"}],regionId:[{required:!0,message:"请输入",trigger:"blur"}],image:[{required:!0,message:"请输入",trigger:"blur"}]},formLabelWidth:"100px"}},props:{dialogFormVisible:{type:Boolean,required:!0},RoleClassification:{type:Array,required:!0},areaList:{type:Array,required:!0},currentPageRecords:{type:Array,required:!0}},created:function(){},computed:{regName:function(){var e=this,t=[];return t=this.areaList.filter((function(t){return t.id===e.formData.regionId})),t},title:function(){return this.formData.id?"编辑人员":"新增人员"}},methods:{handleClose:function(){this.$emit("isOFFDialog")},Coverhttprequest:function(e){var t=this;return Object(o["a"])(Object(i["a"])().mark((function a(){var r,n;return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=new FormData,r.append("fileName",e.file),a.next=4,Object(s["f"])(r);case 4:n=a.sent,t.formData.image=n.data;case 6:case"end":return a.stop()}}),a)})))()},beforeUploadImg:function(e){var t="jpg"===e.type||"png",a=e.size/100;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),a||this.$message.error("上传头像图片大小不能超过 100kb!"),t&&a},addPeronnel:function(){var e=this;return Object(o["a"])(Object(i["a"])().mark((function t(){return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.formData.validate();case 2:if(!e.formData.id){t.next=11;break}return t.next=5,Object(s["i"])(e.formData.id,e.formData);case 5:e.$message.success("修改成功"),e.formData={},e.$emit("isOFFDialog"),e.$emit("repeat"),t.next=18;break;case 11:return e.formData.regionName=e.regName[0].name,t.next=14,Object(s["d"])(e.formData);case 14:e.$emit("isOFFDialog"),e.$message.success("新增人员成功"),e.formData={},e.$emit("repeat");case 18:case"end":return t.stop()}}),t)})))()}}}),f=d,m=(a("9055"),a("2877")),p=Object(m["a"])(f,c,u,!1,null,"e2fb73a8",null),b=p.exports,g={name:"personnel",components:{Table:l["a"],NewDailog:b},data:function(){return{NavList:[{label:"人员名称",value:"userName"},{label:"归属区域",value:"regionName"},{label:"角色",value:"role.roleName"},{label:"联系电话",value:"mobile"}],currentObj:{},baseparams:{pageIndex:1,pageSize:10},currentPageRecords:[],valueName:"",dialogFormVisible:!1,RoleClassification:[],areaList:[]}},beforeUpdate:function(){this.currentObj.pageSize=+this.currentObj.pageSize,this.currentObj.pageIndex=+this.currentObj.pageIndex},created:function(){this.getUpersonnel(this.baseparams)},methods:{getUpersonnel:function(e){var t=this;return Object(o["a"])(Object(i["a"])().mark((function a(){var r;return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(s["j"])(e);case 2:r=a.sent,t.currentObj=r.data,t.currentPageRecords=r.data.currentPageRecords;case 5:case"end":return a.stop()}}),a)})))()},changePage:function(){var e=this;return Object(o["a"])(Object(i["a"])().mark((function t(){var a;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={pageIndex:e.currentObj.pageIndex,pageSize:e.currentObj.pageSize},t.next=3,e.getUpersonnel(a);case 3:case"end":return t.stop()}}),t)})))()},queryPresonnel:function(){var e={userName:this.valueName};this.getUpersonnel(e)},clearValue:function(){this.getUpersonnel(this.baseparams)},offdialog:function(){this.dialogFormVisible=!1},isShowDialog:function(){var e=this;return Object(o["a"])(Object(i["a"])().mark((function t(){var a,r,n;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.dialogFormVisible=!0,t.next=3,Object(s["g"])();case 3:return a=t.sent,e.RoleClassification=a.data,r={pageIndex:1,pageSize:1e3},t.next=8,Object(s["a"])(r);case 8:n=t.sent,e.areaList=n.data.currentPageRecords;case 10:case"end":return t.stop()}}),t)})))()},delPersonnel:function(e){var t=this;return Object(o["a"])(Object(i["a"])().mark((function a(){return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(s["b"])(e.id);case 2:t.$message.success("删除成功"),t.getUpersonnel();case 4:case"end":return a.stop()}}),a)})))()},isShowDialogModify:function(e){var t=this;return Object(o["a"])(Object(i["a"])().mark((function a(){return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.$refs.newdailog.formData=e,t.isShowDialog();case 2:case"end":return a.stop()}}),a)})))()}}},h=g,v=(a("77b4"),Object(m["a"])(h,r,n,!1,null,"3eedda1d",null));t["default"]=v.exports},8409:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table"},[a("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[a("el-row",{staticClass:"btn-col",attrs:{type:"flex"}},[a("el-col",{staticClass:"btn1",attrs:{span:2}},[e.isShowNew?a("dkd-button",{attrs:{user:"create"},on:{click:function(t){return e.$emit("isShowDialog")}}},[e._v("新建")]):e._e()],1),a("el-col",[e.isShow?a("dkd-button",{attrs:{user:"cancel"}},[e._v("工单配置")]):e._e()],1)],1),a("div",{staticClass:"table-container"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.currentPageRecords}},[a("el-table-column",{attrs:{label:"序号",type:"index",index:e.num,width:"80"}}),e._l(e.NavList,(function(e,t){return a("el-table-column",{key:t,attrs:{prop:e.value,label:e.label,"min-width":"创建日期"===e.label?200:120}})})),e._t("default")],2)],1),a("el-pagination",{staticClass:"el-pagination-container",attrs:{"hide-on-single-page":!1,"current-page":e.pageIndex,"page-size":+e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:+e.totalCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},n=[],i=(a("a9e3"),a("d3b7"),a("159b"),a("ac1f"),a("5319"),{name:"Table",data:function(){return{}},props:{NavList:{type:Array,required:!0},isShow:{type:Boolean,default:!0},isShowNew:{type:Boolean,default:!0},currentPageRecords:{type:Array,default:function(){return[]}},pageIndex:{type:Number,default:1},pageSize:{type:Number,default:10},totalCount:{type:String,default:"0"},totalPage:{type:String,default:"0"}},updated:function(){},watch:{currentPageRecords:{immediate:!0,handler:function(){this.currentPageRecords.forEach((function(e){var t;e.createType=0===e.createType?"自动":"手动",e.updateTime=null===(t=e.updateTime)||void 0===t?void 0:t.replace("T"," ")}))}}},computed:{num:function(){return(this.pageIndex-1)*this.pageSize+1}},methods:{handleSizeChange:function(e){this.$emit("update:pageSize",e),this.$emit("changePage")},handleCurrentChange:function(e){this.$emit("update:pageIndex",e),this.$emit("changePage")}}}),o=i,s=(a("8a07"),a("2877")),l=Object(s["a"])(o,r,n,!1,null,"57873faa",null);t["a"]=l.exports},8442:function(e,t,a){},"8a07":function(e,t,a){"use strict";a("8442")},9055:function(e,t,a){"use strict";a("c9a1")},bc95:function(e,t,a){"use strict";a.d(t,"j",(function(){return n})),a.d(t,"c",(function(){return i})),a.d(t,"l",(function(){return o})),a.d(t,"h",(function(){return s})),a.d(t,"k",(function(){return l})),a.d(t,"m",(function(){return c})),a.d(t,"e",(function(){return u})),a.d(t,"a",(function(){return d})),a.d(t,"g",(function(){return f})),a.d(t,"f",(function(){return m})),a.d(t,"d",(function(){return p})),a.d(t,"b",(function(){return b})),a.d(t,"i",(function(){return g}));a("99af");var r=a("b775"),n=function(e){return Object(r["a"])({url:"/api/user-service/user/search",params:e})},i=function(e){return Object(r["a"])({url:"/api/user-service/user/searchUserWork",params:e})},o=function(e){return Object(r["a"])({url:"/api/user-service/user/"+e})},s=function(e){return Object(r["a"])({url:"/api/task-service/task/userWork",params:e})},l=function(e,t){return Object(r["a"])({url:"/api/task-service/task/taskReportInfo/".concat(e,"/").concat(t)})},c=function(e,t){return Object(r["a"])({url:"/api/task-service/task/collectReport/".concat(e,"/").concat(t)})},u=function(e,t,a,n){return Object(r["a"])({url:"/api/task-service/task/userWorkTop10/".concat(e,"/").concat(t,"/").concat(a,"/").concat(n)})},d=function(e){return Object(r["a"])({url:"/api/vm-service/region/search",params:e})},f=function(){return Object(r["a"])({url:"/api/user-service/role"})},m=function(e){return Object(r["a"])({url:"/api/vm-service/sku/fileUpload",method:"POST",data:e})},p=function(e){return Object(r["a"])({url:"/api/user-service/user",method:"POST",data:e})},b=function(e){return Object(r["a"])({url:"/api/user-service/user/"+e,method:"DELETE"})},g=function(e,t){return Object(r["a"])({url:"/api/user-service/user/"+e,method:"PUT",data:t})}},c9a1:function(e,t,a){}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-20b0147f"],{"063d":function(e,t,a){"use strict";a("ad13")},"0c5d":function(e,t,a){"use strict";a("6927")},"0d4f":function(e,t,a){"use strict";a("3ae0")},"20d7":function(e,t,a){"use strict";a("7050")},"3ae0":function(e,t,a){},"3be9":function(e,t,a){},6927:function(e,t,a){},7050:function(e,t,a){},"9ab0":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"search"},[a("el-form",{ref:"formInline",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[a("el-form-item",{attrs:{label:e.firstItem}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.formInline.user,callback:function(t){e.$set(e.formInline,"user",t)},expression:"formInline.user"}}),e.formInline.user?a("i",{staticClass:"el-icon-circle-close",on:{click:function(t){e.formInline.user=""}}}):e._e()],1),e.isSelect?a("el-form-item",{attrs:{label:e.secondItem}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formInline.region,callback:function(t){e.$set(e.formInline,"region",t)},expression:"formInline.region"}},e._l(e.selectOption,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1),e.formInline.region?a("i",{staticClass:"el-icon-circle-close",on:{click:function(t){e.formInline.region=""}}}):e._e()],1):e._e(),a("el-form-item",[a("bb-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.search(t)}}},[a("i",{staticClass:"el-icon-search"}),e._v(" 查询 ")])],1)],1)],1)])},n=[],i={name:"searchTop",data:function(){return{firstItem:this.searchItem.firstItem,secondItem:this.searchItem.secondItem||"",isSelect:this.searchItem.isSelect,selectOption:[],formInline:this.searchItem.formInline}},computed:{},props:{searchItem:{type:Object,required:!0}},methods:{search:function(){this.$emit("searchForm",this.formInline),this.$refs.formInline.resetFields()},onSubmit:function(){console.log("submit!")},handleSelectChange:function(){}}},o=i,s=(a("e36b"),a("2877")),c=Object(s["a"])(o,r,n,!1,null,"39f00194",null);t["a"]=c.exports},ad13:function(e,t,a){},c929:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table"},[a("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[a("el-row",{staticClass:"btn-col",attrs:{type:"flex"}},[a("el-col",{staticClass:"btn1",attrs:{span:2}},[e.isShowNew?a("dkd-button",{attrs:{user:"create"},on:{click:function(t){return e.$emit("add")}}},[e._v("新建")]):e._e()],1),a("el-col",[e.isShow?a("dkd-button",{attrs:{user:"cancel"}},[e._v("工单配置")]):e._e()],1)],1),a("div",{staticClass:"table-container"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.currentPageRecords}},[a("el-table-column",{attrs:{label:"序号",type:"index",index:e.num,width:"80"}}),e._l(e.NavList,(function(e,t){return a("el-table-column",{key:t,attrs:{prop:e.value,label:e.label,"min-width":"创建日期"===e.label?200:120}})})),e._t("default")],2)],1),a("el-pagination",{staticClass:"el-pagination-container",attrs:{"hide-on-single-page":!0,"current-page":e.pageIndex,"page-size":+e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:+e.totalCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},n=[],i=(a("a9e3"),a("d3b7"),a("159b"),a("ac1f"),a("5319"),{name:"Table",data:function(){return{}},props:{NavList:{type:Array,required:!0},isShowNew:{type:Boolean,default:!0},isShow:{type:Boolean,default:!0},currentPageRecords:{type:Array,default:function(){return[]}},pageIndex:{type:Number,default:1},pageSize:{type:Number,default:10},totalCount:{type:String,default:"0"},totalPage:{type:String,default:"0"}},updated:function(){},watch:{currentPageRecords:{immediate:!0,handler:function(){this.currentPageRecords.forEach((function(e){var t;e.createType=0===e.createType?"自动":"手动",e.updateTime=null===(t=e.updateTime)||void 0===t?void 0:t.replace("T"," ")}))}}},computed:{num:function(){return(this.pageIndex-1)*this.pageSize+1}},methods:{handleSizeChange:function(e){this.$emit("update:pageSize",e),this.$emit("changePage")},handleCurrentChange:function(e){this.$emit("update:pageIndex",e),this.$emit("changePage")},handleClick:function(e){console.log(e)}}}),o=i,s=(a("0c5d"),a("2877")),c=Object(s["a"])(o,r,n,!1,null,"e7e1a1e0",null);t["a"]=c.exports},c932:function(e,t,a){"use strict";a.d(t,"f",(function(){return n})),a.d(t,"a",(function(){return i})),a.d(t,"d",(function(){return o})),a.d(t,"g",(function(){return s})),a.d(t,"e",(function(){return c})),a.d(t,"c",(function(){return l})),a.d(t,"b",(function(){return u}));var r=a("b775");function n(e){return Object(r["a"])({url:"/api/vm-service/node/search",params:e})}function i(e){return Object(r["a"])({url:"/api/vm-service/node",method:"POST",data:e})}function o(){return Object(r["a"])({url:"/api/vm-service/businessType"})}function s(e){return Object(r["a"])({url:"/api/user-service/partner/search",params:e})}function c(e){return Object(r["a"])({url:"/api/vm-service/node/vmList/"+e})}function l(e){return Object(r["a"])({url:"/api/vm-service/node/"+e.id,method:"PUT",data:e})}function u(e){return Object(r["a"])({url:"/api/vm-service/node/"+e,method:"DELETE"})}},e36b:function(e,t,a){"use strict";a("3be9")},f248:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("SearchTop",{ref:"SearchTop",attrs:{searchItem:e.searchItem},on:{searchForm:e.searchFormFn}}),a("bkdTable",e._b({attrs:{NavList:e.NavList,isShow:e.isShow,baseParams:e.baseParams},on:{add:e.addFn,changePage:e.changePageFn}},"bkdTable",e.AreaList,!1,!0),[a("el-table-column",{attrs:{label:"操作","min-width":"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.replaceCode(t.row)}}},[e._v("重置密码")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleClick(t.row)}}},[e._v("查看详情")]),a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){return e.addFn(t.row)}}},[e._v("修改")]),a("el-button",{staticStyle:{color:"red"},attrs:{type:"text",size:"small"},nativeOn:{click:function(a){return e.deleteRow(t.row)}}},[e._v("删除")])]}}])})],1),a("addDialog",{ref:"addDialog",attrs:{visible:e.dialogFormVisible,AreaList:e.AreaList,editAreaList:e.editAreaList},on:{"update:visible":function(t){e.dialogFormVisible=t},add:e.addPoint,edit:e.editFn}}),a("ShowDetail",{ref:"showDetail",attrs:{Visible:e.Visible},on:{"update:Visible":function(t){e.Visible=t},"update:visible":function(t){e.Visible=t}}})],1)},n=[],i=a("c7eb"),o=a("1da1"),s=(a("b0c0"),a("9ab0")),c=a("c929"),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"区域详情",visible:e.Visible,width:"41%"},on:{close:e.onClose}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[e._v(" 合作商名称："+e._s(e.tableData.name)+" ")])]),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[e._v(" 联系人："+e._s(e.tableData.contact)+" ")])])],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[e._v(" 联系电话："+e._s(e.tableData.mobile)+" ")])]),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[e._v(" 分成比例："+e._s(e.tableData.ratio)+"% ")])])],1)],1)},u=[],d=(a("c932"),{name:"ShowDetail",data:function(){return{tableData:[],areaName:""}},props:{Visible:{type:Boolean,required:!0}},created:function(){},methods:{onClose:function(){this.$emit("update:Visible",!1)}}}),m=d,f=(a("063d"),a("2877")),p=Object(f["a"])(m,l,u,!1,null,"5e691817",null),b=p.exports,h=a("b775");function g(e){return Object(h["a"])({url:"/api/user-service/partner/search",params:e})}function v(e){return Object(h["a"])({url:"/api/user-service/partner",method:"POST",data:e})}function w(e){return Object(h["a"])({url:"/api/user-service/partner/"+e.id,method:"PUT",data:e})}function x(e){return Object(h["a"])({url:"/api/user-service/partner/resetPwd/"+e,method:"PUT"})}function O(e){return Object(h["a"])({url:"/api/user-service/partner/"+e.id,method:"DELETE",params:e})}var j=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.titleDialog,visible:e.visible,width:"41%"},on:{close:e.onClose}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{label:"合作商名称:","label-width":e.formLabelWidth,prop:"name"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入",maxlength:"10","show-word-limit":""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name","string"===typeof t?t.trim():t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"联系人:","label-width":e.formLabelWidth,prop:"contact"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入",maxlength:"10","show-word-limit":""},model:{value:e.form.contact,callback:function(t){e.$set(e.form,"contact","string"===typeof t?t.trim():t)},expression:"form.contact"}})],1),a("el-form-item",{attrs:{label:"联系电话:","label-width":e.formLabelWidth,prop:"mobile"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入",maxlength:"11","show-word-limit":""},model:{value:e.form.mobile,callback:function(t){e.$set(e.form,"mobile","string"===typeof t?t.trim():t)},expression:"form.mobile"}})],1),a("el-form-item",{attrs:{label:"分成比例(%):","label-width":e.formLabelWidth,prop:"ratio"}},[a("el-input-number",{attrs:{autocomplete:"off","controls-position":"right",placeholder:"请输入",min:1,max:10},model:{value:e.form.ratio,callback:function(t){e.$set(e.form,"ratio","string"===typeof t?t.trim():t)},expression:"form.ratio"}})],1),this.form.id?e._e():a("el-form-item",{attrs:{label:"账号:","label-width":e.formLabelWidth,prop:"account"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入",maxlength:"18","show-word-limit":""},model:{value:e.form.account,callback:function(t){e.$set(e.form,"account","string"===typeof t?t.trim():t)},expression:"form.account"}})],1),this.form.id?e._e():a("el-form-item",{attrs:{label:"密码:","label-width":e.formLabelWidth,prop:"password"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入",maxlength:"20","show-word-limit":""},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password","string"===typeof t?t.trim():t)},expression:"form.password"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.onClose}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确 定")])],1)],1)},S=[],k=a("ade3"),I=a("ef6c"),y={name:"addDialogPartnter",data:function(){return{form:{name:"",account:"",ratio:"",contact:"",mobile:"",password:"",id:""},formLabelWidth:"140px",rules:{name:[{required:!0,message:"请输入区域名称",trigger:"blur"}],account:[{required:!0,message:"请输入账号",trigger:"blur"}],ratio:[{required:!0,message:"请输入分成比例",trigger:"blur"}],contact:[{required:!0,message:"请输入联系人",trigger:"blur"}],moblie:[{required:!0,message:"请输入联系电话",trigger:"blur"},{pattern:/^(?:(?:\+|00)86)?1[3-9]\d{9}$/,message:"手机号码格式不正确",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},selectOption:[],regionNameList:[],businessTypeNameList:[],ownerNameList:[],addrList:[],options:I["regionData"],selectedOptions:[],nameList:[]}},props:{visible:{type:Boolean,default:!1},AreaList:{type:Object}},created:function(){},computed:{titleDialog:function(){return this.form.id?"修改区域":"新增区域"}},methods:Object(k["a"])({onClose:function(){var e=this;return Object(o["a"])(Object(i["a"])().mark((function t(){return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$emit("update:visible",!1),e.form={name:"",account:"",ratio:"",contact:"",moblie:"",password:"",id:""};case 2:case"end":return t.stop()}}),t)})))()},confirm:function(){var e=this;return Object(o["a"])(Object(i["a"])().mark((function t(){return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.form.id){t.next=5;break}return t.next=3,e.$emit("edit",e.form);case 3:t.next=8;break;case 5:return console.log(e.form),t.next=8,e.$emit("add",e.form);case 8:e.onClose();case 9:case"end":return t.stop()}}),t)})))()},handleChange:function(e){},showEditContent:function(e){var t=this;return Object(o["a"])(Object(i["a"])().mark((function a(){var r,n;return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,getNodeSearchApi(e);case 2:r=a.sent,n=r.data,t.form=n.currentPageRecords[0];case 5:case"end":return a.stop()}}),a)})))()}},"handleChange",(function(e){console.log(e)}))},C=y,_=(a("0d4f"),Object(f["a"])(C,j,S,!1,null,"6ea40650",null)),$=_.exports,L={name:"partner",data:function(){return{searchItem:{firstItem:"合作商搜索",secondItem:"",isSelect:!1,selectOption:[],formInline:{user:"",region:""}},NavList:[{label:"合作商名称",value:"name"},{label:"账号",value:"account"},{label:"设备数量",value:"vmCount"},{label:"分成比例",value:"ratio"},{label:"联系人",value:"contact"},{label:"联系电话",value:"mobile"}],baseParams:{pageIndex:1,pageSize:10},AreaList:{},isShow:!1,dialogFormVisible:!1,editAreaList:{},Visible:!1}},components:{SearchTop:s["a"],bkdTable:c["a"],addDialog:$,ShowDetail:b},created:function(){this.getNodeSearch({pageIndex:1,pageSize:10})},beforeUpdate:function(){this.AreaList.pageSize=+this.AreaList.pageSize,this.AreaList.pageIndex=+this.AreaList.pageIndex},methods:{getNodeSearch:function(e){var t=this;return Object(o["a"])(Object(i["a"])().mark((function a(){var r,n;return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return console.log(e),a.next=3,g(e);case 3:r=a.sent,n=r.data,t.AreaList=n;case 6:case"end":return a.stop()}}),a)})))()},searchFormFn:function(e){e.user?this.getNodeSearch({name:e.user}):this.getNodeSearch({pageIndex:1,pageSize:10})},addFn:function(e){var t=this;return Object(o["a"])(Object(i["a"])().mark((function a(){return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:e&&(t.$refs.addDialog.form=e),t.dialogFormVisible=!0;case 2:case"end":return a.stop()}}),a)})))()},addPoint:function(e){var t=this;return Object(o["a"])(Object(i["a"])().mark((function a(){return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return console.log(e),a.prev=1,a.next=4,v(e);case 4:t.$message.success("添加成功"),t.getNodeSearch({pageIndex:1,pageSize:10}),a.next=12;break;case 8:a.prev=8,a.t0=a["catch"](1),t.$message.error("添加失败"),t.$message.error(a.t0.response.data);case 12:case"end":return a.stop()}}),a,null,[[1,8]])})))()},editFn:function(e){var t=this;return Object(o["a"])(Object(i["a"])().mark((function a(){return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,w(e);case 3:t.$message.success("编辑成功"),a.next=10;break;case 6:a.prev=6,a.t0=a["catch"](0),t.$message.error("编辑失败"),t.$message.error(a.t0.response.data);case 10:case"end":return a.stop()}}),a,null,[[0,6]])})))()},handleClick:function(e){var t=this;return Object(o["a"])(Object(i["a"])().mark((function a(){return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.$refs.showDetail.tableData=e,t.Visible=!0;case 2:case"end":return a.stop()}}),a)})))()},deleteRow:function(e){var t=this;return Object(o["a"])(Object(i["a"])().mark((function a(){return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,O({name:e.name,id:e.id});case 3:t.getNodeSearch({pageIndex:1,pageSize:10}),a.next=9;break;case 6:a.prev=6,a.t0=a["catch"](0),t.$message.error(a.t0.response.data);case 9:case"end":return a.stop()}}),a,null,[[0,6]])})))()},changePageFn:function(){this.getNodeSearch({pageIndex:this.AreaList.pageIndex,pageSize:this.AreaList.pageSize})},replaceCode:function(e){var t=this;console.log(e),this.$confirm("确定要重置合作商密码吗?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(o["a"])(Object(i["a"])().mark((function a(){return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,x(e.id);case 3:t.$message({type:"success",message:"删除成功!"}),a.next=9;break;case 6:a.prev=6,a.t0=a["catch"](0),t.$message.error(a.t0.response.data);case 9:case"end":return a.stop()}}),a,null,[[0,6]])})))).catch((function(){t.$message({type:"info",message:"已取消删除"})}))}}},T=L,P=(a("20d7"),Object(f["a"])(T,r,n,!1,null,"c3feb4ec",null));t["default"]=P.exports}}]);
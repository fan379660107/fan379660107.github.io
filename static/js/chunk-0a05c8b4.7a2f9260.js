(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0a05c8b4"],{1779:function(e,t,n){"use strict";n("4bef")},"4b1f":function(e,t,n){},"4bef":function(e,t,n){},5845:function(e,t,n){"use strict";var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-card",{staticClass:"box-card"},[n("div",{staticClass:"search"},[n("el-form",{ref:"formInline",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[n("el-form-item",{attrs:{label:e.firstItem}},[n("el-input",{attrs:{placeholder:"请输入"},model:{value:e.formInline.user,callback:function(t){e.$set(e.formInline,"user",t)},expression:"formInline.user"}}),e.formInline.user?n("i",{staticClass:"el-icon-circle-close",on:{click:function(t){e.formInline.user=""}}}):e._e()],1),e.isSelect?n("el-form-item",{attrs:{label:e.secondItem}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formInline.region,callback:function(t){e.$set(e.formInline,"region",t)},expression:"formInline.region"}},[n("div",e._l(e.selectOption,(function(e){return n("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})})),1)]),e.formInline.user?n("i",{staticClass:"el-icon-circle-close",on:{click:function(t){e.formInline.user=""}}}):e._e()],1):e._e(),n("el-form-item",[n("bb-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.search(t)}}},[n("i",{staticClass:"el-icon-search"}),e._v(" 查询 ")])],1)],1)],1)])},a=[],r=(n("d3b7"),{data:function(){return{firstItem:this.searchItem.firstItem,secondItem:this.searchItem.secondItem||"",isSelect:this.searchItem.isSelect,selectOption:this.searchItem.selectOption,formInline:this.searchItem.formInline}},computed:{isShow:function(){var e=this;this.selectOption.some((function(t){return e.formInline.region===t.value}))}},props:{searchItem:{type:Object,required:!0}},created:function(){},methods:{search:function(){this.$emit("searchForm",this.formInline),this.$refs.formInline.resetFields()},onSubmit:function(){console.log("submit!")}}}),i=r,o=(n("1779"),n("2877")),c=Object(o["a"])(i,s,a,!1,null,"fef4073c",null);t["a"]=c.exports},7756:function(e,t,n){},9921:function(e,t){e.exports="data:image/png;base64,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"},bc49:function(e,t,n){"use strict";n("4b1f")},d252:function(e,t,n){"use strict";n("7756")},eb8f:function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("searchTop",{attrs:{searchItem:e.searchItem},on:{searchForm:e.searchFormFn}}),n("TableComponent",e._b({attrs:{isSelect:!0,NavList:e.NavList},on:{showAddDialog:e.showAddDialogFn,showBulkDialog:e.showBulkDialogFn,changePage:e.changePageFn,getSelectList:e.getSelectListFn},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(n){return e.changeChannel(t.data)}}},[e._v("货道")]),n("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(n){return e.changeApplyPolicy(t.data)}}},[e._v("策略")]),n("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(n){return e.editFn(t.data)}}},[e._v("修改")])]}}])},"TableComponent",e.searchResults,!1,!0)),n("el-dialog",{attrs:{title:"新增设备",visible:e.addDialogVisible,width:"50%"},on:{"update:visible":function(t){e.addDialogVisible=t},close:e.onCloseaddDialog}},[n("el-form",{ref:"AddForm",attrs:{model:e.AddForm,rules:e.AddFormrules,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"设备编号:"}},[n("span",[e._v("系统自动生成")])]),n("el-form-item",{attrs:{label:"选择型号:",prop:"vmType"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.AddForm.vmType,callback:function(t){e.$set(e.AddForm,"vmType",t)},expression:"AddForm.vmType"}},e._l(e.vmTypeList,(function(e){return n("el-option",{key:e.typeId,attrs:{label:e.name,value:e.typeId}})})),1)],1),n("el-form-item",{attrs:{label:"选择点位:",prop:"nodeId"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.AddForm.nodeId,callback:function(t){e.$set(e.AddForm,"nodeId",t)},expression:"AddForm.nodeId"}},e._l(e.nodeIdList,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("dkd-button",{staticClass:"cancelBtn",attrs:{user:"cancel"},on:{click:e.onCloseaddDialog}},[e._v("取 消")]),n("dkd-button",{attrs:{type:"primary",user:"sure"},on:{click:e.addVm}},[e._v("确 认")])],1)],1),n("el-dialog",{attrs:{title:"批量策略管理",visible:e.bulkDialogVisible,width:"50%"},on:{"update:visible":function(t){e.bulkDialogVisible=t},close:e.onClosebulkDialog}},[e.vmPolicy.id?[n("el-row",{attrs:{type:"flex"}},[n("el-col",[e._v("机器编号："+e._s(e.vmPolicy.innerCode))]),n("el-col",[e._v("策略名称："+e._s(e.vmPolicy.policyName))])],1),n("el-row",{staticStyle:{"margin-top":"20px"}},[n("el-col",[e._v("策略方案："+e._s(e.vmPolicy.discount+"%"))])],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("dkd-button",{staticClass:"cancelBtn",attrs:{user:"cancel"},on:{click:e.cancelPolicy}},[e._v("取消策略")])],1)]:[n("span",[e._v("选择策略：")]),n("el-select",{staticStyle:{width:"80%"},attrs:{placeholder:"请选择"},model:{value:e.policyId,callback:function(t){e.policyId=t},expression:"policyId"}},e._l(e.policyList,(function(e){return n("el-option",{key:e.policyId,attrs:{label:e.policyName,value:e.policyId}})})),1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("dkd-button",{staticClass:"cancelBtn",attrs:{user:"cancel"},on:{click:e.onClosebulkDialog}},[e._v("取 消")]),n("dkd-button",{attrs:{type:"primary",user:"sure"},on:{click:e.bulkHandle}},[e._v("确 认")])],1)]],2),n("el-dialog",{attrs:{title:"修改设备",visible:e.editDialogVisible,width:"50%"},on:{"update:visible":function(t){e.editDialogVisible=t},close:e.onCloseeditDialog}},[n("el-row",{staticStyle:{margin:"30px"}},[e._v("机器编号："),n("span",[e._v(e._s(e.editData.innerCode))])]),n("el-row",{staticStyle:{margin:"30px"}},[e._v("供货时间："),n("span",[e._v(e._s(e.editData.lastSupplyTime))])]),n("el-row",{staticStyle:{margin:"30px"}},[e._v("设备类型："),n("span",[e._v(e._s(e.editData.type))])]),n("el-row",{staticStyle:{margin:"30px"}},[e._v("设备容量："),n("span",[e._v(e._s(e.editData.channelMaxCapacity))])]),n("el-row",{staticStyle:{margin:"30px"}},[e._v("设备点位： "),n("el-select",{staticStyle:{width:"80%"},attrs:{placeholder:"请选择"},model:{value:e.editData.node,callback:function(t){e.$set(e.editData,"node",t)},expression:"editData.node"}},e._l(e.nodeList,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),n("el-row",{staticStyle:{margin:"30px"}},[e._v("合作商："),n("span",[e._v(e._s(e.editData.ownerName))])]),n("el-row",{staticStyle:{margin:"30px"}},[e._v("所属区域："),n("span",[e._v(e._s(e.editData.region))])]),n("el-row",{staticStyle:{margin:"30px"}},[e._v("设备地址："),n("span",[e._v(e._s(e.editData.addr))])]),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("dkd-button",{staticClass:"cancelBtn",attrs:{user:"cancel"},on:{click:e.onCloseeditDialog}},[e._v("取 消")]),n("dkd-button",{attrs:{type:"primary",user:"sure"},on:{click:e.editHandle}},[e._v("确 认")])],1)],1),e.currentVm.type?n("vmChannel",{attrs:{vmChanneldialogVisible:e.vmChanneldialogVisible,channelList:e.channelList,currentVm:e.currentVm},on:{"update:vmChanneldialogVisible":function(t){e.vmChanneldialogVisible=t},"update:vm-channeldialog-visible":function(t){e.vmChanneldialogVisible=t},sureAdvice:e.sureAdviceFn,delGood:e.delGoodFn,sureAdd:e.sureAddFn,sureChangeChannel:e.sureChangeChannelFn}}):e._e()],1)},a=[],r=n("c7eb"),i=n("1da1"),o=(n("d3b7"),n("159b"),n("ac1f"),n("1276"),n("5319"),n("b0c0"),n("4de4"),n("5845")),c=n("01c8"),l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-dialog",{attrs:{title:"货道设置",visible:e.vmChanneldialogVisible,width:"940px"},on:{close:e.onClose}},[n("el-row",{staticStyle:{"background-color":"#f3f6fb",height:"56px","margin-bottom":"15px"},attrs:{type:"flex",justify:"space-between",align:"middle"}},[n("el-col",{attrs:{span:14}},[n("span",{staticStyle:{margin:"0 0 0 40px"}},[e._v("货道行数："+e._s(e.types.vmRow))]),n("span",{staticStyle:{margin:"0 40px"}},[e._v("货道列数："+e._s(e.types.vmCol))]),n("span",[e._v("货道容量（个）："+e._s(e.types.channelMaxCapacity))])]),n("el-col",{attrs:{span:4}},[n("el-button",{staticClass:"create",attrs:{size:"small"},on:{click:e.sortFn}},[e._v("智能排货")])],1)],1),n("div",{staticClass:"scrollbar"},[n("el-scrollbar",{ref:"elbar",staticStyle:{height:"100%"}},e._l(e.channelList.length/10,(function(t,s){return n("div",{key:s,staticStyle:{"margin-bottom":"60px"}},[n("el-row",{staticClass:"scrollbar-item",attrs:{type:"flex",gutter:12}},e._l(e.List(s),(function(t){return n("el-col",{key:t.channelCode,attrs:{span:26}},[n("el-row",{staticClass:"sku"},[n("div",{staticClass:"tag"},[e._v(e._s(t.channelCode))]),n("img",{directives:[{name:"imgError",rawName:"v-imgError",value:e.defaultImg,expression:"defaultImg"}],attrs:{src:e.skuImage(t),alt:""}}),n("p",[e._v(e._s(e.skuName(t)))]),n("el-card",{staticStyle:{"margin-top":"28px"},attrs:{"body-style":"width: 150px; padding:0;text-align:center;"}},[n("el-button",{attrs:{type:"text"},on:{click:function(n){return e.addGood(t)}}},[e._v("添加")]),n("el-button",{style:{color:t.sku?"red":"#eee"},attrs:{type:"text",disabled:!t.sku},on:{click:function(n){return e.delGood(t)}}},[e._v("删除")])],1)],1)],1)})),1)],1)})),0),n("el-button",{staticClass:"left-arrow",staticStyle:{"font-size":"40px"},attrs:{icon:"el-icon-arrow-left",type:"text"},on:{click:e.clickArrowLeft}}),n("el-button",{staticClass:"right-arrow",staticStyle:{"font-size":"40px"},attrs:{icon:"el-icon-arrow-right",type:"text"},on:{click:e.clickArrowRight}})],1),n("el-dialog",{attrs:{title:e.isAdd?"选择商品":"智能排货","append-to-body":"",width:"45%",visible:e.businessTopdialogVisible},on:{"update:visible":function(t){e.businessTopdialogVisible=t},close:e.onClosebusinessTop}},[n("div",{staticStyle:{"margin-left":"30px"}},[e.isAdd?e._e():n("p",[e._v(" 该区域属于"+e._s(e.businessType.name)+"商圈适合销售一下商品： ")]),e.isAdd?n("searchTop",{attrs:{searchItem:e.searchItem},on:{searchForm:e.searchFormFn}}):e._e(),n("el-row",{attrs:{type:"flex"}},e._l(e.TopList1,(function(t,s){return n("el-col",{key:s,staticClass:"sortSku",staticStyle:{margin:"10px"},attrs:{span:6},nativeOn:{click:function(n){return e.choose(t)}}},[t.skuId===e.chooseItem?n("img",{staticClass:"selected",attrs:{src:e.selectedImg,alt:""}}):e._e(),e.isAdd?e._e():n("img",{attrs:{src:t.image,alt:""}}),e.isAdd?n("img",{attrs:{src:t.skuImage,alt:""}}):e._e(),n("p",[e._v(e._s(t.skuName))])])})),1),n("el-row",{directives:[{name:"show",rawName:"v-show",value:0!==e.TopList2.length,expression:"TopList2.length !== 0"}],attrs:{type:"flex"}},e._l(e.TopList2,(function(t,s){return n("el-col",{key:s,staticClass:"sortSku",staticStyle:{margin:"10px"},attrs:{span:6},nativeOn:{click:function(n){return e.choose(t)}}},[t.skuId===e.chooseItem?n("img",{staticClass:"selected",attrs:{src:e.selectedImg,alt:""}}):e._e(),e.isAdd?e._e():n("img",{attrs:{src:t.image,alt:""}}),e.isAdd?n("img",{attrs:{src:t.skuImage,alt:""}}):e._e(),n("p",[e._v(e._s(t.skuName))])])})),1),e.isAdd?n("el-button",{staticClass:"left-arrow1",staticStyle:{"font-size":"40px"},attrs:{icon:"el-icon-arrow-left",type:"text"},on:{click:e.clickArrowLeft1}}):e._e(),e.isAdd?n("el-button",{staticClass:"right-arrow1",staticStyle:{"font-size":"40px"},attrs:{icon:"el-icon-arrow-right",type:"text"},on:{click:e.clickArrowRight1}}):e._e()],1),n("span",{staticClass:"dialog-footer"},[e.isAdd?e._e():n("dkd-button",{attrs:{user:"sure"},on:{click:e.sureAdvice}},[e._v("采纳建议")]),e.isAdd?n("dkd-button",{attrs:{user:"sure"},on:{click:function(t){return e.sureAdd()}}},[e._v("确定")]):e._e()],1)]),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("dkd-button",{attrs:{user:"sure"},on:{click:e.sureChangeChannel}},[e._v("确定")])],1)],1)],1)},u=[],d=n("5530"),p=(n("fb6a"),n("9921")),m=n.n(p),h=n("f958"),f=n.n(h),g=n("f564"),b={data:function(){return{searchItem:{firstItem:"商品名称",secondItem:"",isSelect:!1,formInline:{user:""}},defaultImg:m.a,selectedImg:f.a,businessTopdialogVisible:!1,businessType:{},TopList1:[],TopList2:[],TopList:[],isAdd:!1,currentpageIndex:1,totalPage:0,chooseItem:"",choice:{},currentChannelCode:""}},components:{searchTop:o["a"]},props:{vmChanneldialogVisible:{type:Boolean,default:!1},currentVm:{type:Object,default:function(){return{}}},channelList:{type:Array,default:function(){return[]}}},created:function(){},computed:{types:function(){return this.currentVm.type},List:function(){var e=this;return function(t){return e.channelList.slice(10*t,10*(t+1))}},skuImage:function(){return function(e){var t;return null===(t=e.sku)||void 0===t?void 0:t.skuImage}},skuName:function(){return function(e){var t,n;return null!==(t=null===(n=e.sku)||void 0===n?void 0:n.skuName)&&void 0!==t?t:"暂无商品"}}},methods:{onClose:function(){this.$emit("update:vmChanneldialogVisible",!1)},clickArrowLeft:function(){this.$refs["elbar"].wrap.scrollLeft=this.$refs["elbar"].wrap.scrollLeft-820},clickArrowRight:function(){this.$refs["elbar"].wrap.scrollLeft=this.$refs["elbar"].wrap.scrollWidth,this.sLeft=this.$refs["elbar"].wrap.scrollLeft},delGood:function(e){this.$emit("delGood",e)},sureAdvice:function(){this.$emit("sureAdvice",this.TopList),this.onClosebusinessTop()},sureAdd:function(){this.$emit("sureAdd",this.choice),this.onClosebusinessTop()},sortFn:function(){var e=this;return Object(i["a"])(Object(r["a"])().mark((function t(){var n,s;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(e.currentVm),e.businessType=e.currentVm.node.businessType,t.next=4,Object(g["m"])(e.currentVm.businessId);case 4:n=t.sent,s=n.data,e.TopList=n.data,s.length<=5?e.TopList1=s:s.length>5&&s.length<10?(e.TopList1=s.slice(0,5),e.TopList2=[5-s.length]):(e.TopList1=s.slice(0,5),e.TopList2=s.slice(-5)),e.businessTopdialogVisible=!0;case 9:case"end":return t.stop()}}),t)})))()},onClosebusinessTop:function(){this.businessTopdialogVisible=!1,this.isAdd=!1,this.searchItem.formInline.user="",this.chooseItem=""},addGood:function(e){var t=this;return Object(i["a"])(Object(r["a"])().mark((function n(){return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.isAdd=!0,t.currentChannelCode=e.channelCode,n.next=4,t.getskusearch(t.currentpageIndex);case 4:t.businessTopdialogVisible=!0;case 5:case"end":return n.stop()}}),n)})))()},getskusearch:function(e,t){var n=this;return Object(i["a"])(Object(r["a"])().mark((function s(){var a,i;return Object(r["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return n.TopList1=[],n.TopList2=[],s.next=4,Object(g["u"])(e,t);case 4:a=s.sent,console.log(a),n.totalPage=a.data.totalPage,i=a.data.currentPageRecords,i.length<=5?n.TopList1=i:i.length>5&&i.length<10?(n.TopList1=i.slice(0,5),n.TopList2=[5-i.length]):(n.TopList1=i.slice(0,5),n.TopList2=i.slice(-5));case 9:case"end":return s.stop()}}),s)})))()},clickArrowLeft1:function(){var e=this;return Object(i["a"])(Object(r["a"])().mark((function t(){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e.currentpageIndex<=1)){t.next=2;break}return t.abrupt("return",e.currentpageIndex=1);case 2:return e.currentpageIndex-=1,console.log(e.currentpageIndex),t.next=6,e.getskusearch(e.currentpageIndex);case 6:case"end":return t.stop()}}),t)})))()},clickArrowRight1:function(){var e=this;return Object(i["a"])(Object(r["a"])().mark((function t(){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log(e.totalPage),!(e.currentpageIndex>=e.totalPage)){t.next=3;break}return t.abrupt("return",e.currentpageIndex=e.totalPage);case 3:return e.currentpageIndex+=1,console.log(e.currentpageIndex),t.next=7,e.getskusearch(e.currentpageIndex);case 7:case"end":return t.stop()}}),t)})))()},searchFormFn:function(e){var t=this;return Object(i["a"])(Object(r["a"])().mark((function n(){return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return console.log(e),n.next=3,t.getskusearch(1,e.user);case 3:case"end":return n.stop()}}),n)})))()},choose:function(e){console.log(e),""!==this.chooseItem&&this.chooseItem!==e.skuId?(this.chooseItem=e.skuId,this.choice=Object(d["a"])(Object(d["a"])({},e),{},{channelCode:this.currentChannelCode})):""!==this.chooseItem&&this.chooseItem==e.skuId?this.chooseItem="":(this.chooseItem=e.skuId,this.choice=e,this.choice=Object(d["a"])(Object(d["a"])({},e),{},{channelCode:this.currentChannelCode}))},sureChangeChannel:function(){this.$emit("sureChangeChannel"),this.onClose()}}},v=b,k=(n("d252"),n("2877")),I=Object(k["a"])(v,l,u,!1,null,"57742a3e",null),y=I.exports,C={data:function(){return{searchItem:{firstItem:"设备编号",secondItem:"",isSelect:!1,formInline:{user:""}},baseParams:{pageIndex:1,pageSize:10,innerCode:""},searchResults:{},NavList:[{label:"设备编号",value:"innerCode"},{label:"设备型号",value:"vmType"},{label:"详细地址",value:"node.addr"},{label:"合作商",value:"ownerName"},{label:"设备状态",value:"vmStatus"}],addDialogVisible:!1,bulkDialogVisible:!1,editDialogVisible:!1,vmChanneldialogVisible:!1,AddForm:{nodeId:"",vmType:"",createUserId:this.$store.state.user.userInfo.userId},AddFormrules:{nodeId:[{required:!0,message:"请选择点位",trigger:"change"}],vmType:[{required:!0,message:"请选择型号",trigger:"change"}]},nodeIdList:[],vmTypeList:[],SelectList:[],policyList:[],policyId:"",editData:{},nodeList:[],vmId:"",vmPolicy:{},vmInnerCode:"",channelList:[],currentVm:{}}},components:{searchTop:o["a"],TableComponent:c["a"],vmChannel:y},computed:{},created:function(){this.getVmSearch(this.baseParams)},beforeUpdate:function(){this.searchResults.pageSize=+this.searchResults.pageSize,this.searchResults.pageIndex=+this.searchResults.pageIndex},methods:{getVmSearch:function(e){var t=this;return Object(i["a"])(Object(r["a"])().mark((function n(){var s;return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(g["j"])(e);case 2:s=n.sent,t.searchResults=s.data;case 4:case"end":return n.stop()}}),n)})))()},changePageFn:function(){this.getVmSearch({pageIndex:this.searchResults.pageIndex,pageSize:this.searchResults.pageSize})},searchFormFn:function(e){console.log(e),this.baseParams.innerCode=e.user,this.getVmSearch(this.baseParams)},changeApplyPolicy:function(e){var t=this;return Object(i["a"])(Object(r["a"])().mark((function n(){var s;return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.vmInnerCode=e.innerCode,n.next=3,Object(g["w"])(t.vmInnerCode);case 3:s=n.sent,console.log(s),t.vmPolicy=s.data,console.log(t.vmPolicy),t.showBulkDialogFn();case 8:case"end":return n.stop()}}),n)})))()},cancelPolicy:function(){var e=this;return Object(i["a"])(Object(r["a"])().mark((function t(){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(g["e"])(e.vmPolicy.innerCode,e.vmPolicy.policyId);case 2:e.getVmSearch(e.baseParams),e.onClosebulkDialog();case 4:case"end":return t.stop()}}),t)})))()},onCloseaddDialog:function(){this.addDialogVisible=!1,this.$refs.AddForm.resetFields(),this.AddForm={nodeId:"",vmType:"",createUserId:this.$store.state.user.userInfo.userId}},showAddDialogFn:function(){var e=this;return Object(i["a"])(Object(r["a"])().mark((function t(){var n,s;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.addDialogVisible=!0,t.next=3,Object(g["l"])();case 3:return n=t.sent,t.next=6,Object(g["o"])();case 6:s=t.sent,e.nodeIdList=s.data.currentPageRecords,e.vmTypeList=n.data.currentPageRecords;case 9:case"end":return t.stop()}}),t)})))()},addVm:function(){var e=this;return Object(i["a"])(Object(r["a"])().mark((function t(){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.AddForm.validate();case 2:return t.next=4,Object(g["b"])(e.AddForm);case 4:e.getVmSearch(e.baseParams),e.onCloseaddDialog();case 6:case"end":return t.stop()}}),t)})))()},showBulkDialogFn:function(){var e=this;return Object(i["a"])(Object(r["a"])().mark((function t(){var n;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.bulkDialogVisible=!0,t.next=3,Object(g["r"])();case 3:n=t.sent,e.policyList=n.data;case 5:case"end":return t.stop()}}),t)})))()},getSelectListFn:function(e){var t=this;e.forEach((function(e){return t.SelectList.push(e.innerCode)})),console.log(this.SelectList)},onClosebulkDialog:function(){this.bulkDialogVisible=!1,this.vmPolicy={},this.vmInnerCode="",this.SelectList=[]},bulkHandle:function(){var e=this;return Object(i["a"])(Object(r["a"])().mark((function t(){var n,s;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={},n=0!==e.SelectList.length?{innerCodeList:[e.vmInnerCode],policyId:e.policyId}:{innerCodeList:e.SelectList,policyId:e.policyId},t.next=4,Object(g["d"])(n);case 4:s=t.sent,console.log(s),e.onClosebulkDialog();case 7:case"end":return t.stop()}}),t)})))()},editFn:function(e){var t=this;return Object(i["a"])(Object(r["a"])().mark((function n(){var s,a,i;return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.editDialogVisible=!0,s=e.node.addr.split("-")[e.node.addr.split("-").length-1],a=e.lastSupplyTime.replace("T"," "),t.editData={innerCode:e.innerCode,lastSupplyTime:a,type:e.type.name,channelMaxCapacity:e.type.channelMaxCapacity,node:e.node.id,ownerName:e.ownerName,region:e.region.name,addr:s},t.vmId=e.id,n.next=7,Object(g["o"])();case 7:i=n.sent,t.nodeList=i.data.currentPageRecords;case 9:case"end":return n.stop()}}),n)})))()},onCloseeditDialog:function(){this.editDialogVisible=!1},editHandle:function(){var e=this;return Object(i["a"])(Object(r["a"])().mark((function t(){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(g["f"])(e.vmId,e.editData.node);case 2:e.getVmSearch(e.baseParams),e.onCloseeditDialog();case 4:case"end":return t.stop()}}),t)})))()},changeChannel:function(e){var t=this;return Object(i["a"])(Object(r["a"])().mark((function n(){var s;return Object(r["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(g["n"])(e.innerCode);case 2:s=n.sent,t.channelList=s.data,t.currentVm=e,console.log(t.channelList),t.vmChanneldialogVisible=!0;case 7:case"end":return n.stop()}}),n)})))()},sureAdviceFn:function(e){var t=this;e.forEach((function(e,n){t.channelList[n].sku.skuImage=e.image,t.channelList[n].sku.skuName=e.skuName}))},delGoodFn:function(e){console.log(e),this.channelList.filter((function(t){return t.channelCode==e.channelCode}))[0].sku.skuImage="",this.channelList.filter((function(t){return t.channelCode==e.channelCode}))[0].sku.skuName=""},sureAddFn:function(e){console.log(e),this.channelList.filter((function(t){return t.channelCode==e.channelCode}))[0].sku.skuImage=e.skuImage,this.channelList.filter((function(t){return t.channelCode==e.channelCode}))[0].sku.skuName=e.skuName},sureChangeChannelFn:function(){var e=this;return Object(i["a"])(Object(r["a"])().mark((function t(){var n;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={innerCode:e.currentVm.innerCode,channelList:e.channelList},t.next=3,Object(g["g"])(n);case 3:e.getVmSearch(e.baseParams);case 4:case"end":return t.stop()}}),t)})))()}}},w=C,x=(n("bc49"),Object(k["a"])(w,s,a,!1,null,"6fc2d18f",null));t["default"]=x.exports},f564:function(e,t,n){"use strict";n.d(t,"j",(function(){return a})),n.d(t,"k",(function(){return r})),n.d(t,"h",(function(){return i})),n.d(t,"p",(function(){return o})),n.d(t,"q",(function(){return c})),n.d(t,"s",(function(){return l})),n.d(t,"v",(function(){return u})),n.d(t,"t",(function(){return d})),n.d(t,"c",(function(){return p})),n.d(t,"i",(function(){return m})),n.d(t,"a",(function(){return h})),n.d(t,"l",(function(){return f})),n.d(t,"o",(function(){return g})),n.d(t,"b",(function(){return b})),n.d(t,"r",(function(){return v})),n.d(t,"d",(function(){return k})),n.d(t,"f",(function(){return I})),n.d(t,"w",(function(){return y})),n.d(t,"e",(function(){return C})),n.d(t,"n",(function(){return w})),n.d(t,"m",(function(){return x})),n.d(t,"u",(function(){return j})),n.d(t,"g",(function(){return A}));n("99af");var s=n("b775"),a=function(e){return Object(s["a"])({method:"GET",url:"/api/vm-service/vm/search",params:e})},r=function(e){return Object(s["a"])({method:"GET",url:"/api/vm-service/vmType/search",params:e})},i=function(e){return Object(s["a"])({method:"DELETE",url:"/api/vm-service/vmType/"+e})},o=function(e,t,n){return Object(s["a"])({method:"GET",url:"/api/order-service/report/orderAmount?start=".concat(e,"&end=").concat(t,"&innerCode=").concat(n)})},c=function(e,t,n){return Object(s["a"])({method:"GET",url:"/api/order-service/report/orderCount?start=".concat(e,"&end=").concat(t,"&innerCode=").concat(n)})},l=function(e,t,n,a){return Object(s["a"])({method:"GET",url:"/api/task-service/task/repairCount/"+e+"/"+t+"/"+n,paramas:a})},u=function(e,t,n,a){return Object(s["a"])({method:"GET",url:"/api/task-service/task/supplyCount/"+e+"/"+t+"/"+n,paramas:a})},d=function(e,t,n,a){return Object(s["a"])({method:"GET",url:"/api/order-service/report/skuCollect/"+e+"/"+t+"/"+n,paramas:a})},p=function(e){return Object(s["a"])({method:"post",url:"/api/vm-service/vmType",data:e})},m=function(e,t){return Object(s["a"])({method:"PUT",url:"/api/vm-service/vmType/"+e,data:t})},h=function(e){return Object(s["a"])({method:"post",url:"/api/vm-service/sku/fileUpload",data:e})},f=function(){return Object(s["a"])({method:"GET",url:"/api/vm-service/vmType/search?pageIndex=1&pageSize=100000"})},g=function(){return Object(s["a"])({method:"GET",url:"/api/vm-service/node/search?pageIndex=1&pageSize=100000"})},b=function(e){return Object(s["a"])({method:"POST",url:"/api/vm-service/vm",data:e})},v=function(){return Object(s["a"])({url:"/api/vm-service/policy"})},k=function(e){return Object(s["a"])({url:"/api/vm-service/vm/applyPolicy",method:"PUT",data:e})},I=function(e,t){return Object(s["a"])({url:"/api/vm-service/vm/"+e+"/"+t,method:"PUT"})},y=function(e){return Object(s["a"])({url:"/api/vm-service/policy/vmPolicy/"+e})},C=function(e,t){return Object(s["a"])({url:"/api/vm-service/vm/cancelPolicy/"+e+"/"+t,method:"PUT"})},w=function(e){return Object(s["a"])({url:"/api/vm-service/channel/channelList/"+e})},x=function(e){return Object(s["a"])({url:"/api/vm-service/sku/businessTop10/"+e})},j=function(e,t){return Object(s["a"])({url:"/api/vm-service/sku/search",params:{pageIndex:e,pageSize:10,skuName:t}})},A=function(e){return Object(s["a"])({url:"/api/vm-service/channel/channelConfig",method:"PUT",data:e})}},f958:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAACQ0lEQVRYR83YP2gTURzA8e8vTSwUEXRQcFHXTiJ10EFcOrQIHQodCiZRCy46uIWmaKSJHRyETBWhSa2IEMGKuAiCRXHWxUGcHAQHhwZqaJLeT15IRNPk8ufe5XLju/fnc793v/fenSxk9FhVeagwCYwR4KVCSuJp3VSYCdBRG9pgHiflrsTSujMMkTEYAzMgDTI6jcg0DFZBCiWBCnCom4dsxtiO0BcnzNRIhTMqvOgEaoWxBhLhfTnEzMFddssR3qly1g3UDmMHJDyXCpd3xqmMfWUTuNQvxgYoe6rKrVRKnHhGV1W57gXjBeSIkMgn5b7pJJbRJEraK6YlSOClwk9gAQi1GKQswpV8Up6ae9G0xoCcgLQDub0zzW32pX0oxMXcomzFl3VahQ3gyD+NthFm15Py1pTFMzqpymsgYgPTbso+/f7F+cIDKcVX9KTuUQAmUH6MKNNrt+VzHXNalS23NaeXyLgujAJr+SW5ZipNZXX0aJElJ8yjjYR8N2XzaT0RET6iHLcVmc4rdYir64uSax5wfkUPH9jjg8K4bYxrlpltwHE496Q+RabyzayOFou8AS74gemY9grfSmEmCgnZRlVi93iGMucXpiOoVgFeUSWqYZaBG35iugK5LXaNe/1kU7t+PR8/bGI8R8g2xhPID0zfIL8wfYH8xPQM8hvTE2gQmK5Bg8J0BRokpiNo0Bj33b7+rd3N1mGzTsutI4jItD2gBYnZN2VBY/4DDQPmL2hYMDVQNKN3Gj+LbGZLv339Abi3VpXvOoUQAAAAAElFTkSuQmCC"}}]);
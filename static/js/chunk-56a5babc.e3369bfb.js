(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-56a5babc"],{"03bf":function(e,t,a){"use strict";a("d9a6")},3428:function(e,t,a){},"8f23":function(e,t,a){},"969a":function(e,t,a){"use strict";a("e80d")},af25:function(e,t,a){"use strict";a("3428")},c625:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("SearchTop",{ref:"SearchTop",attrs:{searchItem:e.searchItem},on:{searchForm:e.searchFormFn}}),a("bkdTable",e._b({attrs:{NavList:e.NavList,isShow:e.isShow,baseParams:e.baseParams},on:{add:e.addFn,changePage:e.changePageFn}},"bkdTable",e.AreaList,!1,!0),[a("el-table-column",{attrs:{label:"操作","min-width":"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleClick(t.row)}}},[e._v("查看详情")])]}}])})],1),a("dialogAdd",{ref:"showAdd",attrs:{visible:e.dialogFormVisible,AreaList:e.AreaList},on:{"update:visible":function(t){e.dialogFormVisible=t},add:e.addArea}}),a("el-dialog",{attrs:{title:"工单详情",visible:e.dialogVisible,width:"30%"},on:{close:e.onClose}},[a("el-row",{staticStyle:{"margin-bottom":"10px"}},[a("el-col",{attrs:{span:12}},[e._v(e._s(e.list.taskStatus))]),a("el-col",{attrs:{span:12}})],1),a("el-row",{staticStyle:{"margin-bottom":"10px"}},[a("el-col",{attrs:{span:12}},[e._v("设备编号："+e._s(e.list.innerCode))]),a("el-col",{attrs:{span:12}},[e._v("创建日期："+e._s(e.list.createTime))])],1),a("el-row",{staticStyle:{"margin-bottom":"10px"}},[a("el-col",{attrs:{span:12}},[e._v("运维人员："+e._s(e.list.userName))]),a("el-col",{attrs:{span:12}})],1),a("el-row",{staticStyle:{"margin-bottom":"10px"}},[a("el-col",{attrs:{span:12}},[e._v("工单类型："+e._s(e.list.typeName))]),a("el-col",{attrs:{span:12}},[e._v("工单方式："+e._s(e.list.createType))])],1),a("el-row",{staticStyle:{"margin-bottom":"10px"}},[a("el-col",{attrs:{span:12}},[e._v("备注："+e._s(e.list.desc))]),a("el-col",{attrs:{span:12}},[e._v("定位："+e._s(e.list.addr))])],1)],1)],1)},n=[],s=a("c7eb"),i=a("1da1"),l=(a("d3b7"),a("159b"),a("4de4"),a("b0c0"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"search"},[a("el-form",{ref:"formInline",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[a("el-form-item",{attrs:{label:e.firstItem}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.formInline.user,callback:function(t){e.$set(e.formInline,"user",t)},expression:"formInline.user"}}),e.formInline.user?a("i",{staticClass:"el-icon-circle-close",on:{click:function(t){e.formInline.user=""}}}):e._e()],1),e.isSelect?a("el-form-item",{attrs:{label:e.secondItem}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formInline.region,callback:function(t){e.$set(e.formInline,"region",t)},expression:"formInline.region"}},e._l(e.selectOption,(function(e){return a("el-option",{key:e.statusId,attrs:{label:e.statusName,value:e.statusId}})})),1),e.formInline.region?a("i",{staticClass:"el-icon-circle-close",on:{click:function(t){e.formInline.region=""}}}):e._e()],1):e._e(),a("el-form-item",[a("bb-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.search(t)}}},[a("i",{staticClass:"el-icon-search"}),e._v(" 查询 ")])],1)],1)],1)])}),o=[],c={name:"searchTop",data:function(){return{firstItem:this.searchItem.firstItem,secondItem:this.searchItem.secondItem||"",isSelect:this.searchItem.isSelect,selectOption:[],formInline:this.searchItem.formInline}},computed:{},props:{searchItem:{type:Object,required:!0}},methods:{search:function(){this.$emit("searchForm",this.formInline),this.$refs.formInline.resetFields()},onSubmit:function(){console.log("submit!")},handleSelectChange:function(){},setSelectOption:function(e){this.selectOption=e}}},u=c,d=(a("af25"),a("2877")),p=Object(d["a"])(u,l,o,!1,null,"7d298cd1",null),m=p.exports,f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table"},[a("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[a("el-row",{staticClass:"btn-col",attrs:{type:"flex"}},[a("el-col",{staticClass:"btn1",attrs:{span:2}},[e.isShowNew?a("dkd-button",{attrs:{user:"create"},on:{click:function(t){return e.$emit("add")}}},[e._v("新建")]):e._e()],1),a("el-col",[e.isShow?a("dkd-button",{attrs:{user:"cancel"}},[e._v("工单配置")]):e._e()],1)],1),a("div",{staticClass:"table-container"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.currentPageRecords}},[a("el-table-column",{attrs:{label:"序号",type:"index",index:e.num,width:"80"}}),e._l(e.NavList,(function(e,t){return a("el-table-column",{key:t,attrs:{prop:e.value,label:e.label,"min-width":"创建日期"===e.label?200:120}})})),e._t("default")],2)],1),a("el-pagination",{staticClass:"el-pagination-container",attrs:{"hide-on-single-page":!0,"current-page":e.pageIndex,"page-size":+e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:+e.totalCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},h=[],b=(a("a9e3"),a("ac1f"),a("5319"),{name:"Table",data:function(){return{}},props:{NavList:{type:Array,required:!0},isShowNew:{type:Boolean,default:!0},isShow:{type:Boolean,default:!0},currentPageRecords:{type:Array,default:function(){return[]}},pageIndex:{type:Number,default:1},pageSize:{type:Number,default:10},totalCount:{type:String,default:"0"},totalPage:{type:String,default:"0"}},updated:function(){},watch:{currentPageRecords:{immediate:!0,handler:function(){this.currentPageRecords.forEach((function(e){var t;e.createType=0===e.createType?"自动":"手动",e.updateTime=null===(t=e.updateTime)||void 0===t?void 0:t.replace("T"," ")}))}}},computed:{num:function(){return(this.pageIndex-1)*this.pageSize+1}},methods:{handleSizeChange:function(e){this.$emit("update:pageSize",e),this.$emit("changePage")},handleCurrentChange:function(e){this.$emit("update:pageIndex",e),this.$emit("changePage")},handleClick:function(e){console.log(e)}}}),g=b,v=(a("fc1c"),Object(d["a"])(g,f,h,!1,null,"474f2141",null)),k=v.exports,w=a("b775");function y(e){return Object(w["a"])({url:"/api/task-service/task/search",params:e})}function S(){return Object(w["a"])({url:"/api/task-service/task/allTaskStatus"})}function x(e){return Object(w["a"])({url:"/api/task-service/taskType/list",params:e})}function I(e){return Object(w["a"])({url:"/api/user-service/user/search",params:e})}function O(e){return Object(w["a"])({url:"/api/task-service/task/create",method:"POST",data:e})}var C=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.titleDialog,visible:e.visible,width:"41%"},on:{close:e.onClose}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{label:"设备编号:","label-width":e.formLabelWidth,prop:"innerCode"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入",maxlength:"12","show-word-limit":""},model:{value:e.form.innerCode,callback:function(t){e.$set(e.form,"innerCode",t)},expression:"form.innerCode"}})],1),a("el-form-item",{attrs:{label:"工单类型:","label-width":e.formLabelWidth,prop:"taskType"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.taskType,callback:function(t){e.$set(e.form,"taskType",t)},expression:"form.taskType"}},e._l(e.selectOption,(function(e){return a("el-option",{key:e.typeId,attrs:{label:e.typeName,value:e.typeId}})})),1)],1),a("el-form-item",{attrs:{label:"运维人员:","label-width":e.formLabelWidth,prop:"userName"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.userName,callback:function(t){e.$set(e.form,"userName",t)},expression:"form.userName"}},e._l(e.selectUser,(function(e){return a("el-option",{key:e.id,attrs:{label:e.userName,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:"备注:","label-width":e.formLabelWidth,prop:"remark"}},[a("el-input",{attrs:{type:"textarea",autocomplete:"off",placeholder:"请输入备注(不超过40字)",maxlength:"40","show-word-limit":""},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.onClose}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确 定")])],1)],1)},_=[],j={name:"dialog",data:function(){return{form:{innerCode:"",taskType:"",userName:"",remark:""},formLabelWidth:"140px",rules:{innerCode:[{required:!0,message:"请输入区域名称",trigger:"blur"}],taskType:[{required:!0,message:"请输入区域名称",trigger:"blur"}],userName:[{required:!0,message:"请输入区域名称",trigger:"blur"}],remark:[{required:!0,message:"请输入区域名称",trigger:"blur"}]},selectOption:[],selectUser:[]}},props:{visible:{type:Boolean,default:!1},AreaList:{type:Object},editAreaList:{type:Object,default:function(){}}},created:function(){},methods:{onClose:function(){var e=this;return Object(i["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$emit("update:visible",!1);case 1:case"end":return t.stop()}}),t)})))()},confirm:function(){var e=this;return Object(i["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.ruleForm.validate();case 2:return t.next=4,e.$emit("add",e.form);case 4:e.onClose();case 5:case"end":return t.stop()}}),t)})))()},showEditContent:function(){var e=this;return Object(i["a"])(Object(s["a"])().mark((function t(){var a,r,n;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,x({alertValue:50});case 2:return a=t.sent,r=a.data,e.selectOption=r,e.selectOption=e.selectOption.filter((function(e){return 2!==e.typeId})),t.next=8,I({isRepair:!0});case 8:n=t.sent,console.log(n),e.selectUser=n.data.currentPageRecords;case 11:case"end":return t.stop()}}),t)})))()}},computed:{titleDialog:function(){return this.form.id?"修改区域":"新增工单"}}},T=j,N=(a("03bf"),Object(d["a"])(T,C,_,!1,null,"55a42a58",null)),$=N.exports,L={name:"partner",data:function(){return{searchItem:{firstItem:"工单编号",secondItem:"工单状态",isSelect:!0,selectOption:[],formInline:{user:"",region:""}},NavList:[{label:"工单编号",value:"taskCode"},{label:"设备编号",value:"innerCode"},{label:"工单类型",value:"typeName"},{label:"工单方式",value:"createType"},{label:"工单状态",value:"taskStatus"},{label:"运维人员",value:"userName"},{label:"创建日期",value:"updateTime"}],baseParams:{pageIndex:1,pageSize:10},AreaList:{},isShow:!1,dialogFormVisible:!1,editAreaList:{},Visible:!1,isRepair:!0,dialogVisible:!1,list:{}}},components:{SearchTop:m,bkdTable:k,dialogAdd:$},created:function(){this.getNodeSearch()},beforeUpdate:function(){this.AreaList.pageSize=+this.AreaList.pageSize,this.AreaList.pageIndex=+this.AreaList.pageIndex},methods:{getNodeSearch:function(e){var t=this;return Object(i["a"])(Object(s["a"])().mark((function a(){var r,n,i,l;return Object(s["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e=e||{isRepair:!0},a.next=3,y(e);case 3:return r=a.sent,n=r.data,a.next=7,S();case 7:i=a.sent,t.$refs.SearchTop.setSelectOption(i.data),l=n,l.currentPageRecords.forEach((function(e){var t,a,r;1===(null===(t=e.taskType)||void 0===t?void 0:t.typeId)?e.typeName="投放工单":3===(null===(a=e.taskType)||void 0===a?void 0:a.typeId)?e.typeName="维修工单":4===(null===(r=e.taskType)||void 0===r?void 0:r.typeId)&&(e.typeName="撤机工单"),console.log(e.typeName),1===e.taskStatus?e.taskStatus="待办":2===e.taskStatus?e.taskStatus="进行":3===e.taskStatus?e.taskStatus="取消":4===e.taskStatus&&(e.taskStatus="完成")})),l.currentPageRecords=l.currentPageRecords.filter((function(e){return null!==e.taskType})),t.AreaList=l;case 13:case"end":return a.stop()}}),a)})))()},searchFormFn:function(e){this.getNodeSearch({taskCode:e.user?e.user:"",status:e.region?e.region:"",isRepair:!0})},addFn:function(){var e=this;return Object(i["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.showAdd.showEditContent(),e.dialogFormVisible=!0;case 2:case"end":return t.stop()}}),t)})))()},addArea:function(e){var t=this;return Object(i["a"])(Object(s["a"])().mark((function a(){var r;return Object(s["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return console.log(e),a.prev=1,r={createType:1,innerCode:e.innerCode,userId:e.userName,productType:e.taskType,desc:e.remark},a.next=5,O(r);case 5:t.$message.success("添加成功"),t.getNodeSearch(),a.next=13;break;case 9:a.prev=9,a.t0=a["catch"](1),t.$message.error("添加失败"),t.$message.error(a.t0.response.data);case 13:case"end":return a.stop()}}),a,null,[[1,9]])})))()},handleClick:function(e){var t=this;return Object(i["a"])(Object(s["a"])().mark((function a(){return Object(s["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.list=e,t.dialogVisible=!0;case 2:case"end":return a.stop()}}),a)})))()},deleteRow:function(e){var t=this;return Object(i["a"])(Object(s["a"])().mark((function a(){return Object(s["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,delPartnerApi({name:e.name,id:e.id});case 3:t.getNodeSearch({pageIndex:1,pageSize:10}),a.next=9;break;case 6:a.prev=6,a.t0=a["catch"](0),t.$message.error(a.t0.response.data);case 9:case"end":return a.stop()}}),a,null,[[0,6]])})))()},changePageFn:function(){this.getNodeSearch({pageIndex:this.AreaList.pageIndex,pageSize:this.AreaList.pageSize})},onClose:function(){this.dialogVisible=!1}}},A=L,P=(a("969a"),Object(d["a"])(A,r,n,!1,null,"4c8b7234",null));t["default"]=P.exports},d9a6:function(e,t,a){},e80d:function(e,t,a){},fc1c:function(e,t,a){"use strict";a("8f23")}}]);
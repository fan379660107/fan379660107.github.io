(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-506af60d"],{"0c5d":function(e,t,a){"use strict";a("6927")},"0ef3":function(e,t,a){"use strict";a("a638")},"3be9":function(e,t,a){},6927:function(e,t,a){},"8bd7":function(e,t,a){"use strict";a.d(t,"e",(function(){return n})),a.d(t,"b",(function(){return i})),a.d(t,"d",(function(){return s})),a.d(t,"c",(function(){return o})),a.d(t,"f",(function(){return c})),a.d(t,"a",(function(){return l}));var r=a("b775");function n(e){return Object(r["a"])({url:"/api/vm-service/region/search",params:e})}function i(e){return Object(r["a"])({url:"/api/vm-service/region",method:"POST",data:e})}function s(e){return Object(r["a"])({url:"/api/vm-service/region/"+e})}function o(e){return Object(r["a"])({url:"/api/vm-service/region/"+e.id,method:"PUT",data:e})}function c(e){return Object(r["a"])({url:"/api/vm-service/node/search",params:e})}function l(e){return Object(r["a"])({url:"/api/vm-service/region/"+e,method:"DELETE"})}},"9ab0":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"search"},[a("el-form",{ref:"formInline",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[a("el-form-item",{attrs:{label:e.firstItem}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.formInline.user,callback:function(t){e.$set(e.formInline,"user",t)},expression:"formInline.user"}}),e.formInline.user?a("i",{staticClass:"el-icon-circle-close",on:{click:function(t){e.formInline.user=""}}}):e._e()],1),e.isSelect?a("el-form-item",{attrs:{label:e.secondItem}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formInline.region,callback:function(t){e.$set(e.formInline,"region",t)},expression:"formInline.region"}},e._l(e.selectOption,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1),e.formInline.region?a("i",{staticClass:"el-icon-circle-close",on:{click:function(t){e.formInline.region=""}}}):e._e()],1):e._e(),a("el-form-item",[a("bb-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.search(t)}}},[a("i",{staticClass:"el-icon-search"}),e._v(" 查询 ")])],1)],1)],1)])},n=[],i={name:"searchTop",data:function(){return{firstItem:this.searchItem.firstItem,secondItem:this.searchItem.secondItem||"",isSelect:this.searchItem.isSelect,selectOption:[],formInline:this.searchItem.formInline}},computed:{},props:{searchItem:{type:Object,required:!0}},methods:{search:function(){this.$emit("searchForm",this.formInline),this.$refs.formInline.resetFields()},onSubmit:function(){console.log("submit!")},handleSelectChange:function(){}}},s=i,o=(a("e36b"),a("2877")),c=Object(o["a"])(s,r,n,!1,null,"39f00194",null);t["a"]=c.exports},"9dcd":function(e,t,a){},a638:function(e,t,a){},c929:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table"},[a("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[a("el-row",{staticClass:"btn-col",attrs:{type:"flex"}},[a("el-col",{staticClass:"btn1",attrs:{span:2}},[e.isShowNew?a("dkd-button",{attrs:{user:"create"},on:{click:function(t){return e.$emit("add")}}},[e._v("新建")]):e._e()],1),a("el-col",[e.isShow?a("dkd-button",{attrs:{user:"cancel"}},[e._v("工单配置")]):e._e()],1)],1),a("div",{staticClass:"table-container"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.currentPageRecords}},[a("el-table-column",{attrs:{label:"序号",type:"index",index:e.num,width:"80"}}),e._l(e.NavList,(function(e,t){return a("el-table-column",{key:t,attrs:{prop:e.value,label:e.label,"min-width":"创建日期"===e.label?200:120}})})),e._t("default")],2)],1),a("el-pagination",{staticClass:"el-pagination-container",attrs:{"hide-on-single-page":!0,"current-page":e.pageIndex,"page-size":+e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:+e.totalCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},n=[],i=(a("a9e3"),a("d3b7"),a("159b"),a("ac1f"),a("5319"),{name:"Table",data:function(){return{}},props:{NavList:{type:Array,required:!0},isShowNew:{type:Boolean,default:!0},isShow:{type:Boolean,default:!0},currentPageRecords:{type:Array,default:function(){return[]}},pageIndex:{type:Number,default:1},pageSize:{type:Number,default:10},totalCount:{type:String,default:"0"},totalPage:{type:String,default:"0"}},updated:function(){},watch:{currentPageRecords:{immediate:!0,handler:function(){this.currentPageRecords.forEach((function(e){var t;e.createType=0===e.createType?"自动":"手动",e.updateTime=null===(t=e.updateTime)||void 0===t?void 0:t.replace("T"," ")}))}}},computed:{num:function(){return(this.pageIndex-1)*this.pageSize+1}},methods:{handleSizeChange:function(e){this.$emit("update:pageSize",e),this.$emit("changePage")},handleCurrentChange:function(e){this.$emit("update:pageIndex",e),this.$emit("changePage")},handleClick:function(e){console.log(e)}}}),s=i,o=(a("0c5d"),a("2877")),c=Object(o["a"])(s,r,n,!1,null,"e7e1a1e0",null);t["a"]=c.exports},d53c:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("SearchTop",{attrs:{searchItem:e.searchItem},on:{searchForm:e.searchFormFn}}),a("bkd-table",e._b({attrs:{NavList:e.NavList,isShow:e.isShow,baseParams:e.baseParams},on:{add:e.addFn,changePage:e.changePageFn}},"bkd-table",e.AreaList,!1,!0),[a("el-table-column",{attrs:{label:"操作","min-width":"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleClick(t.row)}}},[e._v("查看详情")]),a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){return e.addFn(t.row)}}},[e._v("修改")]),a("el-button",{staticStyle:{color:"red"},attrs:{type:"text",size:"small"},nativeOn:{click:function(a){return e.deleteRow(t.row)}}},[e._v("删除")])]}}])})],1),a("dialogPoint",{ref:"showEdit",attrs:{visible:e.dialogFormVisible,AreaList:e.AreaList,editAreaList:e.editAreaList},on:{"update:visible":function(t){e.dialogFormVisible=t},add:e.addArea,edit:e.editArea}}),a("ShowDialogPoint",{ref:"showDetail",attrs:{Visible:e.Visible},on:{"update:Visible":function(t){e.Visible=t},"update:visible":function(t){e.Visible=t}}})],1)},n=[],i=a("c7eb"),s=a("1da1"),o=(a("b0c0"),a("c929")),c=a("9ab0"),l=a("8bd7"),u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.titleDialog,visible:e.visible,width:"41%"},on:{close:e.onClose}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{label:"区域名称:","label-width":e.formLabelWidth,prop:"name"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入",maxlength:"15","show-word-limit":""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"备注说明:","label-width":e.formLabelWidth,prop:"remark"}},[a("el-input",{attrs:{type:"textarea",autocomplete:"off",placeholder:"请输入备注(不超过40字)",maxlength:"40","show-word-limit":""},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.onClose}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确 定")])],1)],1)},d=[],m=(a("d3b7"),a("4de4"),{data:function(){var e=this,t=function(){var t=Object(s["a"])(Object(i["a"])().mark((function t(a,r,n){var s,o,c,u;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(l["e"])({pageSize:e.AreaList.totalCount});case 2:o=t.sent,c=o.data.currentPageRecords,u=c,s=e.editAreaList.id?u.filter((function(t){return t.name!==e.editAreaList.name})).some((function(e){return e.name===r})):u.some((function(e){return e.name===r})),s?n(new Error("区域名称重复")):n();case 7:case"end":return t.stop()}}),t)})));return function(e,a,r){return t.apply(this,arguments)}}();return{form:{name:"",remark:""},formLabelWidth:"140px",rules:{name:[{required:!0,message:"请输入区域名称",trigger:"blur"},{validator:t,trigger:"blur"}],remark:[{required:!0,message:"请输入备注说明",trigger:"blur"}]}}},props:{visible:{type:Boolean,default:!1},AreaList:{type:Object},editAreaList:{type:Object,default:function(){}}},created:function(){},methods:{onClose:function(){var e=this;return Object(s["a"])(Object(i["a"])().mark((function t(){return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$emit("update:visible",!1),e.$refs.ruleForm.resetFields(),e.form={name:"",remark:""};case 3:case"end":return t.stop()}}),t)})))()},confirm:function(){var e=this;return Object(s["a"])(Object(i["a"])().mark((function t(){return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.ruleForm.validate();case 2:if(!e.editAreaList.id){t.next=6;break}e.$emit("edit",e.form),t.next=10;break;case 6:return t.next=8,e.$emit("add",e.form);case 8:return t.next=10,e.$refs.ruleForm.resetFields();case 10:e.onClose();case 11:case"end":return t.stop()}}),t)})))()},showEditContent:function(e){var t=this;return Object(s["a"])(Object(i["a"])().mark((function a(){var r,n;return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(l["d"])(e);case 2:r=a.sent,n=r.data,t.form=n;case 5:case"end":return a.stop()}}),a)})))()}},computed:{titleDialog:function(){return this.form.id?"修改区域":"新增区域"}}}),f=m,p=(a("f444"),a("2877")),b=Object(p["a"])(f,u,d,!1,null,"12e044d7",null),h=b.exports,g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"区域详情",visible:e.Visible,width:"41%"},on:{close:e.onClose}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple"},[e._v("区域名称:")])]),a("el-col",{attrs:{span:18}},[a("div",[e._v(e._s(e.areaName))])])],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple"},[e._v("包含点位:")])]),a("el-col",{attrs:{span:18}},[a("el-table",{attrs:{data:e.tableData}},[a("el-table-column",{attrs:{label:"序号",type:"index"}}),a("el-table-column",{attrs:{prop:"name",label:"点位名称"}}),a("el-table-column",{attrs:{prop:"vmCount",label:"设备数量"}})],1)],1)],1)],1)},v=[],w={data:function(){return{tableData:[],areaName:""}},props:{Visible:{type:Boolean,required:!0}},created:function(){},methods:{onClose:function(){this.$emit("update:Visible",!1)},showDetailContent:function(e){var t=this;return Object(s["a"])(Object(i["a"])().mark((function a(){var r,n;return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.areaName=e.name,a.next=3,Object(l["f"])({regionId:e.id});case 3:r=a.sent,n=r.data,console.log(n),t.tableData=n.currentPageRecords;case 7:case"end":return a.stop()}}),a)})))()}}},x=w,O=(a("0ef3"),Object(p["a"])(x,g,v,!1,null,"320b95f2",null)),k=O.exports,j={data:function(){return{searchItem:{firstItem:"区域搜索",isSelect:!1,selectOption:[],formInline:{user:"",region:""}},NavList:[{label:"区域名称",value:"name"},{label:"点位数",value:"nodeCount"},{label:"备注说明",value:"remark"}],isShow:!1,baseParams:{pageIndex:1,pageSize:10},AreaList:{},dialogFormVisible:!1,Visible:!1,editAreaList:{}}},components:{SearchTop:c["a"],bkdTable:o["a"],dialogPoint:h,ShowDialogPoint:k},created:function(){this.getAreaList()},methods:{getAreaList:function(e){var t=this;return Object(s["a"])(Object(i["a"])().mark((function a(){var r;return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(l["e"])(e);case 2:r=a.sent,t.AreaList=r.data,t.AreaList.pageSize=+t.AreaList.pageSize,t.AreaList.pageIndex=+t.AreaList.pageIndex;case 6:case"end":return a.stop()}}),a)})))()},handleClick:function(e){var t=this;return Object(s["a"])(Object(i["a"])().mark((function a(){return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$refs.showDetail.showDetailContent(e);case 2:t.Visible=!0;case 3:case"end":return a.stop()}}),a)})))()},deleteRow:function(e){var t=this;return Object(s["a"])(Object(i["a"])().mark((function a(){return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(l["a"])(e.id);case 3:t.getAreaList(),a.next=9;break;case 6:a.prev=6,a.t0=a["catch"](0),t.$message.error(a.t0.response.data);case 9:case"end":return a.stop()}}),a,null,[[0,6]])})))()},searchFormFn:function(e){this.getAreaList({name:e.user}),console.log(e.user)},addFn:function(e){var t=this;return Object(s["a"])(Object(i["a"])().mark((function a(){return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!e){a.next=4;break}return t.editAreaList=e,a.next=4,t.$refs.showEdit.showEditContent(e.id);case 4:t.dialogFormVisible=!0;case 5:case"end":return a.stop()}}),a)})))()},addArea:function(e){var t=this;return Object(s["a"])(Object(i["a"])().mark((function a(){return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(l["b"])({regionName:e.name,remark:e.remark});case 3:t.$message.success("添加成功"),t.getAreaList(),a.next=11;break;case 7:a.prev=7,a.t0=a["catch"](0),console.dir(a.t0),t.$message.error("添加失败");case 11:case"end":return a.stop()}}),a,null,[[0,7]])})))()},editArea:function(e){var t=this;return Object(s["a"])(Object(i["a"])().mark((function a(){return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return console.log(e),a.prev=1,a.next=4,Object(l["c"])({id:e.id,regionName:e.name,remark:e.remark});case 4:t.$message.success("添加成功"),t.getAreaList(),a.next=12;break;case 8:a.prev=8,a.t0=a["catch"](1),console.dir(a.t0),t.$message.error("添加失败");case 12:case"end":return a.stop()}}),a,null,[[1,8]])})))()},changePageFn:function(){this.getAreaList({pageIndex:this.AreaList.pageIndex,pageSize:this.AreaList.pageSize})}}},I=j,C=Object(p["a"])(I,r,n,!1,null,"6400166d",null);t["default"]=C.exports},e36b:function(e,t,a){"use strict";a("3be9")},f444:function(e,t,a){"use strict";a("9dcd")}}]);